PLIP 8801: Move action icon support into actions, deprecate CMFActionIcons
==========================================================================

External review by Hanno Schlichting <hannosch>.

PLIP was reviewed on Mac OS X 10.6 using Python 2.6.2 (64-bit).

Review steps
------------

- Created a new fresh Plone 4 site and reviewed the settings in the action,
  action icons and control panel tool.

- Tested the fallback of both the control panel and normal actions to the
  action icons tool, in case no icon_expr is set. Witnessed the extensive
  and helpful deprecation warnings.

- Created a pristine Plone 3.3 final Data.fs, copied it into the Plone 4
  instance and ran the upgrade via portal_migration. Reviewed the settings
  in the ZMI.

- Tested GenericSetup export / import of the three involved steps.

- Created a Plone 3.3 Data.fs with all optional-but-shipped add-ons installed.
  Tested upgrade to Plone 4.0.

- Tested the upgrade with all of control panel entries, actions and action
  categories missing. Upgrade handles everything gracefully.

- Did a manual code review of all mentioned changesets and ran all tests.


Notes and observations
----------------------

- The icons in the control panel tool uses the PNG versions of the icons,
  while the others use the GIF icons. We should use the GIF versions as before
  in the scope of this PLIP. A switch to PNG icons should be done for all
  icons including types at once.

- After migrating a Plone 3.3 site to 4.0, there are some more icons in the
  action icons tool left:

  * controlpanel/MarkupSettings
  * controlpanel/ContentRules

  Both are missing as icon expressions in the control panel tool.

- Migrating the control panel icons leaves them as GIF, whereas newly created
  ones are PNG, giving a confusing mismatch.

- A GenericSetup export of the actions tool ignores the icon_expr. It is always
  set to an empty value. The other export/import handlers work fine.

- The upgrade does not handle the actions of plone.app.iterate. Since it is
  included in the default, we should handle them. These are:

  * object_buttons/iterate_checkin
  * object_buttons/iterate_checkout
  * object_buttons/iterate_checkout_cancel


Conclusions
-----------

Overall this looks very good, +1.

A couple minor issues remain as noted and should be fixed before the final
review.
