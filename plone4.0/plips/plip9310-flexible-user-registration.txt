PLIP 9310: User registration process more flexible
==================================================

This plip is in progress

Plip ticket: https://dev.plone.org/plone/ticket/9310

To do
-----
- Add tests in plone.app.users
- Add migration check for existing join_form customizations 
- Translating? Seems to be ok, since no new fields were added...
- create nice icon for configlet.

Futher ideas
------------

- Ideally the join process would use the user data that is available for all
  users. However, at this moment there is no such concept. The PAS system makes
  it impossible to define a set of properties available to ALL users: a plugin
  could or could not be for a specific user.
  In our humble opinion user data should not be part of PAS at all, it has
  nothing to do with authentication. That would make it much easier to determine
  user data for all portal users, and use a flexible schema to determine join
  fields.


Testing the functionality/Review
--------------------------------

Use the site setup in the portal as admin, and use 'member registration' config
panel. There you'll find a listing of possible join form fields. Move fields to the right to use 'm on the form, or to the left to not use 'm. Determine order in the right column. Check the join form for the effects.
To create a whole new set of join form field options, you'll need to be a
developer and override the utility for plone.app.users.userdataschema.IUserDataSchema. To do this, create an overrides.zcml, and define a utility for that interface that returns a Schema.


Summary of changes
------------------

- Added configlet for setting join fields. This configlet uses a utility to
  determine what fields can actually be used for the join process. The utility
  returns a schema.
- new join form from plone.app.users.browser.joinform
- patched action definition for 'register'
- authenticator input field added to pageform.pt in plone.app.form
  

Needed documentation changes
----------------------------

Additional config settings are now available to the site admin. The Join form
may contain additional fields.


Backwards compatibility
-----------------------

Join form default is still the same for the end user.


Credits
-------

Huub Bouma
Kees Hink
Duco Dokter

