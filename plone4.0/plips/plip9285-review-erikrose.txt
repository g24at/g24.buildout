PLIP 9285: Show blocked portlets in management interface
=================================================================

Review by Erik Rose (ErikRose@psu.edu, ErikRose on IRC)


UI
--

- I love that you can see what (content-type portlets, for instance) you're
  blocking on the Manage Portlets page.

- I love the new placement of portlets after their respective pop-up menus. Love
  it, love it, love it!

- A bike shed comment, perhaps, but the background-color change doesn't scream
  out "blocked!" to me. What would really drive it home for me is printing the
  portlet title in grey and using a dashed (grey?) border for the outline--a
  "ghostly" portlet, if you will.

    A: I changed it a little bit. I hope it now makes it more clear that the
       portlet is blocked. Anyways, after merge this changes must be
       addressed in the scope of the UI and theme changes.

- This is outside the scope of your PLIP, but I'll mention it for posterity: it
  would be nice if the Block/Unblock menu's changes were AJAXified. Right now,
  some of the stuff on the page requires hitting Save, and some doesn't, and it
  isn't too clear which.


And now for the code...
-----------------------

- Could lines 260-263 at
  https://dev.plone.org/plone/browser/plone.app.portlets/branches/plip9285-show-blocked-portlets/plone/app/portlets/browser/editmanager.py?rev=29016#L260 be
  replaced with simply IPortletContext(self.context), or am I missing something?

    A: Here I'm using the same pattern used in other places of plone.portlets
       code. AFAIK, that's basically because the context can already provide 
       IPortletContext.

- You could save some time in the interpreter by saying something like this at
  https://dev.plone.org/plone/browser/plone.app.portlets/branches/plip9285-show-  blocked-portlets/plone/app/portlets/browser/editmanager.py?rev=29016#L274
  instead of the for loop:

    assignments.extend(mapping.get(key, {}).values())

    A: Yes, done.

- I'd like to see docstrings for the new methods (like the ones in the view) to
  make them screechingly obvious.

    A: Added docstrings.

All in all, a great addition! Nice work!


Update, 10/6/2009
-----------------

- I've taken the liberty of simplifying the IPortletContext adaptation in my
  first code suggestion.

- My .extend comment has been addressed.

- Docstrings have been added, and I've tweaked them for PEP 257 compliance.

- I fear my bike shed comment led to the author sticking some style inline in a
  template. It's much clearer UI-wise, but we should really keep that sort of
  thing in a separate stylesheet. I took the liberty of rolling those changes
  back (please hit me with an axe, Ricardo, if this bothers you), but we should
  make sure those styles
  (https://dev.plone.org/old/plone/changeset/29862/plone.app.portlets/branches/plip9285-show-blocked-portlets/plone/app/portlets/browser/templates/edit-manager-contextual.pt)
  get put somewhere sane in the default theme during merge.

I'm +1 for merge.
