PLIP 9288: Improved commenting infrastructure
=============================================

This plip is ready for review.

Plip ticket: https://dev.plone.org/plone/ticket/9288

Progress tracker: http://www.pivotaltracker.com/projects/15135

Known Issues / Todo
-------------------

 - Clear and rebuild looses all comments.

 - There are some minor CSS issues which will be fixed soon, see
   http://www.pivotaltracker.com/projects/15135 for details.


Summary of changes / Features
-----------------------------

As described in PLIP 9288, a new commenting system was
implemented with the following features:

 - Basic commenting functionality: Users can post comments
   or reply to existing comments. Same functionality and UI
   as the old/current commenting system (e.g. post/reply to
   comment, allow comments on content types, on single
   content objects, and on folders). In addition, it is possible
   to show user images next to the comments (Discussion Control
   Panel -> Show commenter image).

 - Moderation: It is possible to enable moderation, so that every
   comment has to be reviewed before publishing. To enable
   moderation, go to the Types Control Panel, choose "Comment"
   content type and set workflow to "Comment Review Workflow".

 - Mass editing screen/batch moderation: Like in Wordpress, there
   is a moderation view ("moderate comments" in site-actions or
   your-site/@@moderate-comments) for batch editing comments.

 - Captcha support: If either plone.formwidget.captcha or
   plone.formwidget.recaptcha is installed, anonymous comments
   can be spam protected. To enable (re)captcha, go to the
   Discussion Control Panel, allow "Anonymous comments" and choose
   "captcha" or "recaptcha" from the "Captcha" settings.

 - Configurable and extensible comment forms: Using z3c.form for
   the commenting forms allows for components to extend the
   comment form with additional fields or to hide/reorder
   existing fields. The CaptchaExtender (see browser/captcha.py)
   is an example of a very simple form extension.

 - Migration: It is possible to migrate the old comment system
   to the new one. Go to "your-site/@@comment-migration" to
   migrate comments.


Dependencies
------------

- plone.registry

- z3c.form: The first alpha version of is not based on z3c.form:
  http://pypi.python.org/pypi/plone.app.discussion/1.0a1


Discussion add-on products
--------------------------

- plone.formwidget.captcha (z3c.form captcha widget)
  http://svn.plone.org/svn/plone/plone.formwidget.captcha/

- plone.formwidget.recaptcha (z3c.form recaptcha widget)
  http://svn.plone.org/svn/plone/plone.formwidget.recaptcha/

- collective.autoresize (jQuery auto-resize for comment-text)
  http://svn.plone.org/svn/collective/collective.autoresizetextarea/


Further ideas
-------------

- Notification (portlet, mail)

- RichText and intelligenttext comments

- Akismet spam protection

- Auto-approve whitelist

- IP blacklist

- Comment pagination

- Migration from other commenting add-ons (qPloneComments,
  iqpp.plone.commenting)

For a complete list of ideas see:
http://www.pivotaltracker.com/projects/15135


Needed documentation changes
----------------------------

To my knowledge, there is no documentation about the current
commenting system on plone.org.


Backwards compatibility
-----------------------

There is a migration script to migrate comments
("your-site/@@comment-migration").


Credits
-------

 - Timo Stollenwerk
 - Martin Aspeli
 - Jon Stahl
 - David Glick
 - Lennart Regebro
 - Alan Hoey